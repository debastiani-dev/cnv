{% extends "layouts/base.html" %}
{% load static i18n %}

{% block layout %}
<style>
    /* 
     * Explicitly force Desktop Layout structure.
     * This acts as a fallback/override if Tailwind build is stale or lg: classes fail.
     */
    @media (min-width: 1024px) {
        #static-sidebar { display: flex !important; }
        #main-content { padding-left: 18rem !important; } /* 72 * 0.25rem = 18rem */
    }
</style>

<div x-data="{ sidebarOpen: false }" class="min-h-screen relative z-0">
    
    <!-- Mobile Sidebar (Off-canvas) -->
    <div class="relative z-50 lg:hidden" role="dialog" aria-modal="true" x-show="sidebarOpen" x-cloak>
        
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-gray-900/80" 
             x-show="sidebarOpen" 
             x-transition:enter="transition-opacity ease-linear duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition-opacity ease-linear duration-300"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0"
             x-cloak></div>

        <div class="fixed inset-0 flex">
            <!-- Sidebar Panel -->
            <div class="relative mr-16 flex w-full max-w-xs flex-1 transform transition ease-in-out duration-300"
                 x-show="sidebarOpen"
                 x-transition:enter="transition ease-in-out duration-300 transform"
                 x-transition:enter-start="-translate-x-full"
                 x-transition:enter-end="translate-x-0"
                 x-transition:leave="transition ease-in-out duration-300 transform"
                 x-transition:leave-start="translate-x-0"
                 x-transition:leave-end="-translate-x-full"
                 x-cloak>
                
                <!-- Close Button -->
                <div class="absolute left-full top-0 flex w-16 justify-center pt-5">
                    <button type="button" class="-m-2.5 p-2.5" @click="sidebarOpen = false">
                        <span class="sr-only">{% trans "Close sidebar" %}</span>
                        <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <!-- Sidebar Content -->
                <div class="flex grow flex-col gap-y-5 overflow-y-auto bg-stone-300 px-6 pb-4">
                    <div class="flex h-16 shrink-0 items-center justify-center">
                        <a href="{% url 'dashboard:home' %}">
                            <img class="h-8 w-auto" src="{% static 'img/logo.png' %}" alt="CNV System">
                        </a>
                    </div>
                    <nav class="flex flex-1 flex-col">
                        <ul role="list" class="flex flex-1 flex-col gap-y-7">
                            <li>
                                <ul role="list" class="-mx-2 space-y-1">
                                    <li>
                                        <a href="{% url 'dashboard:home' %}" class="{% if request.resolver_match.url_name == 'home' %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                            <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                                            </svg>
                                            {% trans "Dashboard" %}
                                        </a>
                                    </li>
                                    
                                    <div class="text-xs font-semibold leading-6 text-stone-500 mt-4 mb-2">{% trans "Operations" %}</div>
                                    
                                    <li>
                                        <a href="{% url 'cattle:list' %}" class="{% if 'cattle' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M96 288L96 480C96 497.7 110.3 512 128 512L160 512C177.7 512 192 497.7 192 480L192 391.8C201.9 398.4 212.6 403.8 224 407.9L224 432.1C224 440.9 231.2 448.1 240 448.1C248.8 448.1 256 440.9 256 432.1L256 415.2C261.3 415.8 266.6 416.1 272 416.1C277.4 416.1 282.7 415.8 288 415.2L288 432.1C288 440.9 295.2 448.1 304 448.1C312.8 448.1 320 440.9 320 432.1L320 407.9C331.4 403.9 342.1 398.5 352 391.8L352 480C352 497.7 366.3 512 384 512L416 512C433.7 512 448 497.7 448 480L448 320L480 352L480 401.5C480 411 482.8 420.2 488.1 428.1L530 491C538.8 504.1 553.5 512 569.3 512C591.8 512 611.2 496.1 615.6 474L635.9 372.4C638.5 359.4 635.6 345.9 627.9 335.1L624 329.6L624 248C624 234.7 613.3 224 600 224C586.7 224 576 234.7 576 248L576 262.4L523.1 188.3C496 150.5 452.4 128 405.9 128L144 128C77.7 128 24 181.7 24 248L24 302C9.4 313.8 0 331.8 0 352L0 369.6C0 377.6 6.4 384 14.4 384C46.2 384 72 358.2 72 326.4L72 248C72 223.7 84.1 202.2 102.5 189.1C98.3 199.9 96 211.7 96 224L96 288zM560 400C560 391.2 567.2 384 576 384C584.8 384 592 391.2 592 400C592 408.8 584.8 416 576 416C567.2 416 560 408.8 560 400zM166.6 230.6C162.4 226.4 160 220.6 160 214.6C160 202.1 170.1 192 182.6 192L361.3 192C373.8 192 383.9 202.1 383.9 214.6C383.9 220.6 381.5 226.4 377.3 230.6L353.9 254C332.2 275.8 302.7 288 272 288C241.3 288 211.8 275.8 190.1 254.1L166.7 230.7z"/></svg>
                                            {% trans "Cattle" %}
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'sales:list' %}" class="{% if 'sales' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                            <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                            </svg>
                                            {% trans "Sales" %}
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'purchases:list' %}" class="{% if 'purchases' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                            <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                            </svg>
                                            {% trans "Purchases" %}
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'health:event-list' %}" class="{% if request.resolver_match.url_name == 'event-list' %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                            <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                            </svg>
                                            {% trans "Sanitary Events" %}
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'health:medication-list' %}" class="{% if 'medication' in request.resolver_match.url_name %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                            <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z" />
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z" />
                                            </svg>
                                            {% trans "Medications" %}
                                        </a>
                                    </li>
                                    <li>
                                        <a href="{% url 'partners:list' %}" class="{% if 'partners' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                            <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 5.472m0 0a9.094 9.094 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" />
                                            </svg>
                                            {% trans "Partners" %}
                                        </a>
                                    </li>

                                    {% if request.user.is_superuser %}
                                    <div class="text-xs font-semibold leading-6 text-stone-500 mt-4 mb-2">{% trans "Administration" %}</div>
                                    <li>
                                        <a href="{% url 'authentication:user-list' %}" class="{% if 'authentication' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                            <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                                            </svg>
                                            {% trans "Users" %}
                                        </a>
                                    </li>
                                    {% endif %}
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- Desktop Sidebar (Static) -->
    <div id="static-sidebar" class="hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col">
        <div class="flex grow flex-col gap-y-5 overflow-y-auto bg-stone-300 px-6 pb-4">
            <div class="flex h-16 shrink-0 items-center justify-center">
                <a href="{% url 'dashboard:home' %}">
                    <img class="h-8 w-auto" src="{% static 'img/logo.png' %}" alt="CNV">
                </a>
            </div>
            <nav class="flex flex-1 flex-col">
                <ul role="list" class="flex flex-1 flex-col gap-y-7">
                    <li>
                        <ul role="list" class="-mx-2 space-y-1">
                            <li>
                                <a href="{% url 'dashboard:home' %}" class="{% if request.resolver_match.url_name == 'home' %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                    <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                                    </svg>
                                    {% trans "Dashboard" %}
                                </a>
                            </li>

                            <div class="text-xs font-semibold leading-6 text-stone-500 mt-4 mb-2">{% trans "Operations" %}</div>

                            <li>
                                <a href="{% url 'cattle:list' %}" class="{% if 'cattle' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                    <svg class="h-6 w-6 shrink-0" fill="currentColor" viewBox="0 0 640 640" aria-hidden="true">
                                        <!-- Font Awesome Cow Icon -->
                                        <path d="M96 288L96 480C96 497.7 110.3 512 128 512L160 512C177.7 512 192 497.7 192 480L192 391.8C201.9 398.4 212.6 403.8 224 407.9L224 432.1C224 440.9 231.2 448.1 240 448.1C248.8 448.1 256 440.9 256 432.1L256 415.2C261.3 415.8 266.6 416.1 272 416.1C277.4 416.1 282.7 415.8 288 415.2L288 432.1C288 440.9 295.2 448.1 304 448.1C312.8 448.1 320 440.9 320 432.1L320 407.9C331.4 403.9 342.1 398.5 352 391.8L352 480C352 497.7 366.3 512 384 512L416 512C433.7 512 448 497.7 448 480L448 320L480 352L480 401.5C480 411 482.8 420.2 488.1 428.1L530 491C538.8 504.1 553.5 512 569.3 512C591.8 512 611.2 496.1 615.6 474L635.9 372.4C638.5 359.4 635.6 345.9 627.9 335.1L624 329.6L624 248C624 234.7 613.3 224 600 224C586.7 224 576 234.7 576 248L576 262.4L523.1 188.3C496 150.5 452.4 128 405.9 128L144 128C77.7 128 24 181.7 24 248L24 302C9.4 313.8 0 331.8 0 352L0 369.6C0 377.6 6.4 384 14.4 384C46.2 384 72 358.2 72 326.4L72 248C72 223.7 84.1 202.2 102.5 189.1C98.3 199.9 96 211.7 96 224L96 288zM560 400C560 391.2 567.2 384 576 384C584.8 384 592 391.2 592 400C592 408.8 584.8 416 576 416C567.2 416 560 408.8 560 400zM166.6 230.6C162.4 226.4 160 220.6 160 214.6C160 202.1 170.1 192 182.6 192L361.3 192C373.8 192 383.9 202.1 383.9 214.6C383.9 220.6 381.5 226.4 377.3 230.6L353.9 254C332.2 275.8 302.7 288 272 288C241.3 288 211.8 275.8 190.1 254.1L166.7 230.7z"/>
                                    </svg>
                                    {% trans "Cattle" %}
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'sales:list' %}" class="{% if 'sales' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                    <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    {% trans "Sales" %}
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'purchases:list' %}" class="{% if 'purchases' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                    <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                    </svg>
                                    {% trans "Purchases" %}
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'health:event-list' %}" class="{% if request.resolver_match.url_name == 'event-list' %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                    <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                                    </svg>
                                    {% trans "Sanitary Events" %}
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'health:medication-list' %}" class="{% if 'medication' in request.resolver_match.url_name %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                    <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5" />
                                    </svg>
                                    {% trans "Medications" %}
                                </a>
                            </li>
                            <li>
                                <a href="{% url 'partners:list' %}" class="{% if 'partners' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                    <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 5.472m0 0a9.094 9.094 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z" />
                                    </svg>
                                    {% trans "Partners" %}
                                </a>
                            </li>

                            {% if request.user.is_superuser %}
                            <div class="text-xs font-semibold leading-6 text-stone-500 mt-4 mb-2">{% trans "Administration" %}</div>
                            <li>
                                <a href="{% url 'authentication:user-list' %}" class="{% if 'authentication' in request.resolver_match.app_names %}bg-stone-400 text-stone-900{% else %}text-stone-700 hover:text-stone-900 hover:bg-stone-400{% endif %} group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6">
                                    <svg class="h-6 w-6 shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                                    </svg>
                                    {% trans "Users" %}
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <!-- Main Content Area -->
    <div id="main-content" class="lg:pl-72">
        <!-- Top Bar -->
        <div class="sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-stone-300 px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8">
            <button type="button" class="-m-2.5 p-2.5 text-gray-700 lg:hidden" @click="sidebarOpen = true">
                <span class="sr-only">{% trans "Open sidebar" %}</span>
                <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m16.5 5.25H12" />
                </svg>
            </button>

            <!-- Separator -->
            <div class="h-6 w-px bg-gray-900/10 lg:hidden" aria-hidden="true"></div>

            <div class="flex flex-1 gap-x-4 self-stretch lg:gap-x-6">
                <!-- Spacer -->
                <div class="flex flex-1"></div>
                
                <!-- Profile Dropdown -->
                <div class="flex items-center gap-x-4 lg:gap-x-6">
                    <div class="relative" x-data="{ open: false }">
                        <button type="button" class="-m-1.5 flex items-center p-1.5" id="user-menu-button" aria-expanded="false" aria-haspopup="true" @click="open = !open" @click.outside="open = false">
                            <span class="sr-only">{% trans "Open user menu" %}</span>
                            <span class="flex items-center">
                                <span class="text-sm font-semibold leading-6 text-gray-900" aria-hidden="true">{{ user.get_full_name|default:user.username }}</span>
                                {% if user.profile_image %}
                                    <img class="ml-4 h-8 w-8 rounded-full bg-gray-50 object-cover" src="{{ user.profile_image.url }}" alt="{{ user.get_full_name }}">
                                {% else %}
                                    <img class="ml-4 h-8 w-8 rounded-full bg-gray-50 object-cover" src="{% static 'img/default_profile.png' %}" alt="{{ user.get_full_name }}">
                                {% endif %}
                                <svg class="ml-2 h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" />
                                </svg>
                            </span>
                        </button>

                        <div class="absolute right-0 z-10 mt-2.5 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1" x-show="open" x-transition x-cloak>
                            <a href="{% url 'authentication:user-detail' request.user.pk %}" class="block px-3 py-1 text-sm leading-6 text-gray-900 hover:bg-gray-50" role="menuitem" tabindex="-1" id="user-menu-item-0">{% trans "Your profile" %}</a>
                            <form method="post" action="{% url 'authentication:logout' %}">
                                {% csrf_token %}
                                <button type="submit" class="block w-full text-left px-3 py-1 text-sm leading-6 text-gray-900 hover:bg-gray-50" role="menuitem" tabindex="-1" id="user-menu-item-1">{% trans "Sign out" %}</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Body -->
        <main class="py-10">
            <div class="px-4 sm:px-6 lg:px-8">
                <!-- Flash Messages -->
                {% if messages %}
                <div class="mb-4">
                    {% for message in messages %}
                    <div class="rounded-md p-4 mb-2 {% if message.tags == 'error' %}bg-red-50 text-red-700 ring-1 ring-inset ring-red-600/10{% elif message.tags == 'success' %}bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/10{% else %}bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-700/10{% endif %}">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                {% if message.tags == 'error' %}
                                <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z" clip-rule="evenodd" />
                                </svg>
                                {% elif message.tags == 'success' %}
                                <svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                                </svg>
                                {% endif %}
                            </div>
                            <div class="ml-3">
                                <p class="text-sm font-medium">{{ message }}</p>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                
                <!-- Content Block -->
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>
</div>
{% endblock %}
